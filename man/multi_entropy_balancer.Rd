% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/entropy_balancer.R
\name{multi_entropy_balancer}
\alias{multi_entropy_balancer}
\title{Run Entropy Balancer for Multiple Zones}
\usage{
multi_entropy_balancer(
  seed_df,
  controls_zones_df,
  controls_region_df = NULL,
  controls_importance = NULL,
  sample_id_col = "sample_id",
  zone_id_col = "zone_id",
  region_id_col = "region_id",
  weight_col = "initial_weight",
  lb = 0.1,
  ub = 4,
  lb_abs = 0,
  ub_abs = Inf,
  max_iterations = 10000,
  max_delta = NULL,
  master_control = NULL,
  print_every_n = 100
)
}
\arguments{
\item{seed_df}{A data.frame containing the seed incidence and weight data.}

\item{controls_zones_df}{Data.frame of per-zone control totals (zone_id, control columns).}

\item{controls_region_df}{Optional. Data.frame of per-zone meta control totals.}

\item{controls_importance}{Optional. Vector of control importances.}

\item{sample_id_col}{The name of the sample ID column.}

\item{zone_id_col}{The name of the zone ID column.}

\item{region_id_col}{The name of the region ID column.}

\item{weight_col}{The name of the initial weight column.}

\item{lb}{Lower bound vector or scalar factor for weights (default = 0.1).}

\item{ub}{Upper bound vector or scalar factor for weights (default = 4).}

\item{lb_abs}{Absolute lower bound for weights (default = 0).}

\item{ub_abs}{Absolute upper bound for weights (default = Inf).}

\item{max_iterations}{Maximum number of iterations (default = 10000).}

\item{max_delta}{Convergence threshold (default = 1e-8).}

\item{master_control}{Index of master control, or -1 for none.}

\item{print_every_n}{Iteration progress frequency.}
}
\value{
A list with round1, meta_controls, and round2 results.
}
\description{
This function runs two-stage entropy balancing on survey seed data. It performs:
(1) initial zone-level balancing,
(2) meta control factoring from the results,
(3) final balancing with the meta targets.
}
